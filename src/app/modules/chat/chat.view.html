<ion-header>
	<ion-navbar>
		<ion-title>Chat with {{chat.otherUser.details.firstName}}</ion-title>
	</ion-navbar>
</ion-header>

<ion-content class="chat-com">

	<div class="container">

		<section class="messages">

			<div *ngFor="let message of chatMessages$ | async" [ngSwitch]="message.type">
				<div class="msg--date-wrapper" *ngSwitchCase="'date'">
					<h3 class="msg--date">{{message.calendarDate()}}</h3>
				</div>

				<div *ngSwitchCase="'message'" class="msg msg--{{message.isMe() ? 'them' : 'me'}}">
					<loading-img [src]="message.avatar"></loading-img>
					<blockquote>{{message.message}}</blockquote>
				</div>
			</div>

		</section>

		<footer>

			<textarea
				[(ngModel)]="messageInput"
				[disabled]="!(ws.connected$ | async)"
				type="text"
				placeholder="Your message"
				name="sendMessage"></textarea>
			<div class="msg-send">
			<button
				ion-button
				[disabled]="!(ws.connected$ | async)"
				(mousedown)="sendMessage($event)">Send</button>
			</div>

		</footer>

	</div>

</ion-content>
